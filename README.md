# å‰ªå­˜ - å‰ªè´´æ¿å†å²ç®¡ç†å·¥å…·

ä¸€ä¸ªåŸºäº Wails + Vue 3 + TypeScript çš„å¤šå¹³å°å‰ªè´´æ¿å†å²ç®¡ç†å·¥å…·ã€‚

## å·²ä¸Šæ¶App Store
https://apps.apple.com/us/app/å‰ªå­˜/id6754015301

## åŠŸèƒ½ç‰¹æ€§
- [æ–°å¢è‡ªå®šä¹‰è„šæœ¬-ç‚¹å‡»æŸ¥çœ‹](scriptingExample/README.md)
- è‡ªåŠ¨ä¿å­˜å‰ªè´´æ¿å†å²
- æ”¯æŒæ–‡æœ¬ã€å›¾ç‰‡ã€æ–‡ä»¶ç­‰å¤šç§ç±»å‹
- å®æ—¶æœç´¢å’Œè¿‡æ»¤åŠŸèƒ½ï¼ˆæ”¯æŒæœç´¢å›¾ç‰‡ä¸­çš„ OCR æ–‡å­—ï¼‰
- æœ¬åœ° SQLite æ•°æ®åº“å­˜å‚¨ï¼ˆæ‰€æœ‰æ•°æ®åªå­˜æœ¬åœ°,éšç§å®‰å…¨æœ‰ä¿éšœï¼‰
- ä¸ªæ€§åŒ–è®¾ç½®ï¼šå¯†ç ä¿æŠ¤ã€è‡ªåŠ¨æ¸…ç†ã€å¿«æ·é”®é…ç½®

## é¡¹ç›®æˆªå›¾

<img src="https://raw.githubusercontent.com/snsogbl/clip-save/master/screenshots/clipboard-1.png" alt="Capture" width="960">


## æŠ€æœ¯æ ˆ

- **åç«¯**: Go + Wails v2
- **å‰ç«¯**: Vue 3 + TypeScript + Vite
- **æ•°æ®åº“**: SQLite3
- **å‰ªè´´æ¿**: golang.design/x/clipboard

## å®‰è£…ä¾èµ–

### 1. å®‰è£… Wails CLI

```bash
go install github.com/wailsapp/wails/v2/cmd/wails@latest
```

### 2. å®‰è£…é¡¹ç›®ä¾èµ–

```bash
# Go ä¾èµ–
go mod tidy

# å‰ç«¯ä¾èµ–
cd frontend
npm install
```

## å¼€å‘

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
wails dev
```

è¿™å°†å¯åŠ¨çƒ­é‡è½½å¼€å‘æœåŠ¡å™¨ï¼š
- åç«¯ Go ä»£ç ä¿®æ”¹ä¼šè‡ªåŠ¨é‡æ–°ç¼–è¯‘
- å‰ç«¯ Vue ä»£ç ä¿®æ”¹ä¼šè‡ªåŠ¨çƒ­é‡è½½

### å¼€å‘æ—¶çš„è°ƒè¯•

å¼€å‘æ¨¡å¼ä¸‹ï¼Œåº”ç”¨ä¼šè‡ªåŠ¨æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œå¯ä»¥æŸ¥çœ‹ï¼š
- Console æ—¥å¿—
- Network è¯·æ±‚
- å‰ç«¯ç»„ä»¶çŠ¶æ€

## æ„å»º

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
wails build
```

æ„å»ºå®Œæˆåï¼Œå¯æ‰§è¡Œæ–‡ä»¶å°†ä½äº `build/bin/` ç›®å½•ä¸‹ã€‚

### è‡ªå®šä¹‰è„šæœ¬éƒ¨ç½²åˆ° Cloudflare Pages

é¡¹ç›®ä½¿ç”¨ Cloudflare Pages æ‰˜ç®¡åœ¨çº¿è„šæœ¬åˆ—è¡¨ï¼Œæ”¯æŒç”¨æˆ·ä»"è„šæœ¬å¸‚åœº"ç›´æ¥å®‰è£…å’Œæ›´æ–°è„šæœ¬ã€‚

#### 1. å®‰è£… Wrangler CLI

```bash
npm install -g wrangler
```

#### 2. ç™»å½• Cloudflare

```bash
wrangler login
```

è¿™ä¼šæ‰“å¼€æµè§ˆå™¨ï¼Œç™»å½•ä½ çš„ Cloudflare è´¦å·ã€‚

#### 3. éƒ¨ç½²è„šæœ¬

```bash
wrangler pages deploy scriptingExample --project-name=clip-save-plugins
```

éƒ¨ç½²å®Œæˆåï¼Œè„šæœ¬å°†é€šè¿‡ä»¥ä¸‹ URL è®¿é—®ï¼š
- æ’ä»¶åˆ—è¡¨ï¼š`https://clip-save-plugins.pages.dev/plugins.json`
- è„šæœ¬æ–‡ä»¶ï¼š`https://clip-save-plugins.pages.dev/{è„šæœ¬æ–‡ä»¶å}.js`

#### 4. æ›´æ–°è„šæœ¬

æ¯æ¬¡ä¿®æ”¹ `scriptingExample` ç›®å½•ä¸­çš„æ–‡ä»¶åï¼Œé‡æ–°è¿è¡Œéƒ¨ç½²å‘½ä»¤ï¼š

```bash
wrangler pages deploy scriptingExample --project-name=clip-save-plugins
```

#### 5. æ³¨æ„äº‹é¡¹

- ç¡®ä¿ `plugins.json` ä¸­çš„ `scriptUrl` ä½¿ç”¨ Cloudflare Pages çš„ URL
- éƒ¨ç½²åé€šå¸¸å‡ ç§’å†…ç”Ÿæ•ˆï¼ˆCloudflare Pages ç¼“å­˜æ—¶é—´å¾ˆçŸ­ï¼‰
- å¯ä»¥é€šè¿‡ Cloudflare Dashboard æŸ¥çœ‹éƒ¨ç½²å†å²å’Œæ—¥å¿—

### macOS æ„å»ºé€‰é¡¹

```bash
# æ„å»º Intel ç‰ˆæœ¬
wails build -platform darwin/amd64

# æ„å»º Apple Silicon ç‰ˆæœ¬
wails build -platform darwin/arm64

# æ„å»ºé€šç”¨äºŒè¿›åˆ¶ï¼ˆæ¨èï¼‰
wails build -platform darwin/universal
```

### Windows æ„å»º

```bash
wails build -platform windows/amd64
```

### Linux æ„å»º

```bash
wails build -platform linux/amd64
```

## é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ main.go                      # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ app.go                       # Wails åº”ç”¨ç»“æ„å’Œ API
â”œâ”€â”€ wails.json                   # Wails é…ç½®æ–‡ä»¶
â”œâ”€â”€ go.mod                       # Go ä¾èµ–ç®¡ç†
â”œâ”€â”€ common/                      # å…±äº«ä»£ç 
â”‚   â”œâ”€â”€ clipboard.go             # å‰ªè´´æ¿é€»è¾‘
â”‚   â”œâ”€â”€ clipboard_darwin.go      # macOS ç‰¹å®šä»£ç 
â”‚   â””â”€â”€ db.go                    # æ•°æ®åº“æ“ä½œ
â”œâ”€â”€ frontend/                    # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.vue              # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â””â”€â”€ ClipboardHistory.vue  # å‰ªè´´æ¿å†å²ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ main.ts              # å‰ç«¯å…¥å£
â”‚   â”‚   â””â”€â”€ style.css            # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ index.html               # HTML æ¨¡æ¿
â”‚   â”œâ”€â”€ package.json             # å‰ç«¯ä¾èµ–
â”‚   â”œâ”€â”€ vite.config.ts           # Vite é…ç½®
â”‚   â””â”€â”€ tsconfig.json            # TypeScript é…ç½®
â””â”€â”€ build/                       # æ„å»ºèµ„æºå’Œè¾“å‡º
    â”œâ”€â”€ bin/                     # ç¼–è¯‘åçš„å¯æ‰§è¡Œæ–‡ä»¶
    â”œâ”€â”€ appicon.png              # åº”ç”¨å›¾æ ‡
    â””â”€â”€ darwin/                  # macOS ç‰¹å®šé…ç½®
```

## API è¯´æ˜

### åç«¯ APIï¼ˆGoï¼‰

åœ¨ `app.go` ä¸­å®šä¹‰çš„æ–¹æ³•ä¼šè‡ªåŠ¨æš´éœ²ç»™å‰ç«¯ï¼š

- `SearchClipboardItems(keyword, filterType, limit)` - æœç´¢å‰ªè´´æ¿é¡¹ç›®
- `GetClipboardItems(limit)` - è·å–å‰ªè´´æ¿åˆ—è¡¨
- `GetClipboardItemByID(id)` - æ ¹æ® ID è·å–é¡¹ç›®
- `CopyToClipboard(id)` - å¤åˆ¶é¡¹ç›®åˆ°å‰ªè´´æ¿
- `DeleteClipboardItem(id)` - åˆ é™¤é¡¹ç›®
- `GetStatistics()` - è·å–ç»Ÿè®¡ä¿¡æ¯

### å‰ç«¯è°ƒç”¨ç¤ºä¾‹

```typescript
import { SearchClipboardItems } from '../wailsjs/go/main/App'

// æœç´¢å‰ªè´´æ¿é¡¹ç›®
const items = await SearchClipboardItems('å…³é”®è¯', 'æ‰€æœ‰ç±»å‹', 100)
```

## ä½¿ç”¨è¯´æ˜

1. å¯åŠ¨åº”ç”¨åï¼Œå®ƒä¼šåœ¨åå°è‡ªåŠ¨ä¿å­˜ç³»ç»Ÿå‰ªè´´æ¿
2. æ¯æ¬¡å¤åˆ¶å†…å®¹æ—¶ï¼Œéƒ½ä¼šè‡ªåŠ¨ä¿å­˜åˆ°å†å²è®°å½•
3. ä½¿ç”¨é¡¶éƒ¨æœç´¢æ¡†å¯ä»¥å¿«é€ŸæŸ¥æ‰¾å†å²è®°å½•ï¼ˆæ”¯æŒæœç´¢å›¾ç‰‡ä¸­çš„ OCR æ–‡å­—ï¼‰
4. ä½¿ç”¨è¿‡æ»¤å™¨å¯ä»¥æŒ‰ç±»å‹ç­›é€‰å†…å®¹ï¼ˆæ–‡æœ¬/å›¾ç‰‡/URLç­‰ï¼‰
5. ç‚¹å‡»ä»»æ„å†å²è®°å½•å¯ä»¥æŸ¥çœ‹è¯¦æƒ…
6. å¯¹äºå›¾ç‰‡ç±»å‹ï¼Œç‚¹å‡»"æå–æ–‡å­—"æŒ‰é’®å¯ä»¥æŸ¥çœ‹ OCR è¯†åˆ«ç»“æœ
7. ç‚¹å‡»"å¤åˆ¶"æŒ‰é’®å¯ä»¥å°†å†…å®¹å¤åˆ¶å›å‰ªè´´æ¿
8. ç‚¹å‡»"åˆ é™¤"æŒ‰é’®å¯ä»¥åˆ é™¤å†å²è®°å½•

### OCR æ–‡å­—è¯†åˆ«åŠŸèƒ½

- **è‡ªåŠ¨è¯†åˆ«**ï¼šå¤åˆ¶å›¾ç‰‡åï¼Œåº”ç”¨ä¼šè‡ªåŠ¨åœ¨åå°è¯†åˆ«å›¾ç‰‡ä¸­çš„æ–‡å­—ï¼ˆmacOS 10.15+ï¼‰
- **æ™ºèƒ½æœç´¢**ï¼šè¯†åˆ«åçš„æ–‡å­—ä¼šè‡ªåŠ¨åŠ å…¥æœç´¢ç´¢å¼•ï¼Œè¾“å…¥å…³é”®è¯å³å¯æ‰¾åˆ°åŒ…å«è¯¥æ–‡å­—çš„å›¾ç‰‡
- **æ‰‹åŠ¨æå–**ï¼šåœ¨å›¾ç‰‡è¯¦æƒ…é¡µé¢ï¼Œç‚¹å‡»"æå–æ–‡å­—"æŒ‰é’®å¯ä»¥æŸ¥çœ‹å®Œæ•´çš„ OCR è¯†åˆ«ç»“æœ
- **æ”¯æŒè¯­è¨€**ï¼šæ”¯æŒä¸­æ–‡ï¼ˆç®€ä½“/ç¹ä½“ï¼‰å’Œè‹±æ–‡è¯†åˆ«
- **æ€§èƒ½ä¼˜åŒ–**ï¼šç›¸åŒå›¾ç‰‡åªè¯†åˆ«ä¸€æ¬¡ï¼Œè‡ªåŠ¨å¤ç”¨è¯†åˆ«ç»“æœï¼Œæå‡æ€§èƒ½

## æ•°æ®å­˜å‚¨

å‰ªè´´æ¿å†å²ä¿å­˜åœ¨ï¼š`~/.clipsave/clipboard.db`

æ•°æ®åº“ä¼šè‡ªåŠ¨åˆ›å»ºï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š
- ID - å”¯ä¸€æ ‡è¯†ç¬¦
- Content - å†…å®¹æ–‡æœ¬
- ContentType - å†…å®¹ç±»å‹
- ImageData - å›¾ç‰‡æ•°æ®ï¼ˆPNGæ ¼å¼ï¼‰
- Timestamp - æ—¶é—´æˆ³
- Source - æ¥æº
- CharCount - å­—ç¬¦æ•°
- WordCount - å•è¯æ•°
- OCRText - OCR è¯†åˆ«çš„æ–‡å­—å†…å®¹ï¼ˆå›¾ç‰‡ç±»å‹ä¸“ç”¨ï¼Œç”¨äºæœç´¢ï¼‰

## ç³»ç»Ÿè¦æ±‚

- **macOS**: 10.15 Catalina æˆ–æ›´é«˜ç‰ˆæœ¬ï¼ˆOCR åŠŸèƒ½éœ€è¦ï¼‰
- **Windows**: Windows 10/11ï¼ˆ1809æˆ–æ›´é«˜ç‰ˆæœ¬ï¼‰+ WebView2
- **Linux**: æ”¯æŒ WebKit2GTK çš„å‘è¡Œç‰ˆ
- **Go**: 1.21 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Node.js**: 16 æˆ–æ›´é«˜ç‰ˆæœ¬

## å¼€å‘æ³¨æ„äº‹é¡¹

### æ›´æ–° Go API å

æ¯æ¬¡ä¿®æ”¹ `app.go` ä¸­çš„æ–¹æ³•åï¼Œéœ€è¦é‡æ–°ç”Ÿæˆå‰ç«¯ç»‘å®šï¼š

```bash
wails generate module
```

æˆ–è€…ä½¿ç”¨å¼€å‘æ¨¡å¼ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆï¼š

```bash
wails dev
```

### å‰ç«¯å¼€å‘

å‰ç«¯ä½¿ç”¨ Vite + Vue 3 + TypeScriptï¼š
- æ”¯æŒ TypeScript ç±»å‹æ£€æŸ¥
- ä½¿ç”¨ Composition API
- è‡ªåŠ¨å¯¼å…¥ Wails ç»‘å®š
- çƒ­æ¨¡å—æ›¿æ¢ï¼ˆHMRï¼‰

### CGO ä¾èµ–

é¡¹ç›®ä½¿ç”¨äº† CGOï¼ˆç”¨äº SQLite å’Œå‰ªè´´æ¿æ“ä½œï¼‰ï¼Œæ„å»ºæ—¶éœ€è¦ï¼š
- macOS: éœ€è¦ Xcode Command Line Tools
- Windows: éœ€è¦ MinGW-w64
- Linux: éœ€è¦ gcc

## å¸¸è§é—®é¢˜

### 1. æ„å»ºå¤±è´¥

ç¡®ä¿å®‰è£…äº†æ‰€æœ‰ä¾èµ–ï¼š
```bash
# macOS
xcode-select --install

# Windows
# å®‰è£… MSYS2 å’Œ MinGW-w64

# Linux
sudo apt-get install build-essential libgtk-3-dev libwebkit2gtk-4.0-dev
```

### 2. å‰ç«¯æ— æ³•è°ƒç”¨åç«¯ API

ç¡®ä¿å·²ç»è¿è¡Œäº† `wails generate module` ç”Ÿæˆå‰ç«¯ç»‘å®šã€‚

## è®¸å¯è¯

MIT License

## èµèµæ”¯æŒ

ğŸ’— **è¯·ä½œè€…å–æ¯å’–å•¡**

å¦‚æœè¿™ä¸ªè½¯ä»¶å¸®ä½ çœä¸‹äº†æ—¶é—´ï¼ˆæˆ–è€…è‡³å°‘æ²¡è®©ä½ æŠ“ç‹‚ï¼‰ï¼Œæ¬¢è¿è¯·ä½œè€…å–æ¯å’–å•¡ â˜• æˆ–è€…å•¤é…’ ğŸºï¼

æ¯ä¸€æ¯å’–å•¡éƒ½ä¼šç¥å¥‡åœ°è½¬åŒ–ä¸ºï¼šæ–°åŠŸèƒ½ã€æ›´å°‘çš„ bugï¼ˆæˆ‘å°½é‡ï¼‰ã€ä»¥åŠä½œè€…ç†¬å¤œå†™ä»£ç æ—¶çš„ç²¾ç¥æ”¯æŸ±ã€‚

ä½ çš„ Star â­ å’Œæèµ æ˜¯æˆ‘ä¿®å¤ bug å’Œæ·»åŠ æ–°åŠŸèƒ½çš„åŸåŠ¨åŠ›ï¼ˆä¹Ÿæ˜¯æˆ‘ä¹°å’–å•¡çš„ç»è´¹ï¼‰ï¼

### å¾®ä¿¡æ‰«ä¸€æ‰«

![èµèµç ](frontend/src/assets/static/zs.png)

**"è¯·æˆ‘å–æ¯å’–å•¡å§ â˜•"**

### ç»™é¡¹ç›®ç‚¹ä¸ª Star â­

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç»™é¡¹ç›®ç‚¹ä¸ª Star â­ï¼Œè¿™æ˜¯å¯¹æˆ‘æœ€å¤§çš„æ”¯æŒï¼

## è‡´è°¢

- [Wails](https://wails.io) - æ„å»ºæ¡Œé¢åº”ç”¨çš„æ¡†æ¶
- [Vue 3](https://vuejs.org) - æ¸è¿›å¼ JavaScript æ¡†æ¶
- [golang.design/x/clipboard](https://github.com/golang-design/clipboard) - è·¨å¹³å°å‰ªè´´æ¿åº“
- [json-editor-vue](https://github.com/cloydlau/json-editor-vue)
- [highlight.js](https://github.com/highlightjs/highlight.js)